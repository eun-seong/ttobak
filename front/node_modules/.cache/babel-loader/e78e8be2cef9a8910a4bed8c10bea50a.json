{"ast":null,"code":"import { api } from '../api.js';\nimport { USER_AUTOLOGIN } from './action';\nexport default (() => {\n  return next => action => {\n    if (!action.promise) {\n      const {\n        type,\n        data,\n        ...rest\n      } = action;\n\n      if (type === USER_AUTOLOGIN) {\n        if (data.u_id) {\n          return next({ ...rest,\n            data,\n            type: `${type}_SUCCESS`\n          });\n        } else {\n          return next({ ...rest,\n            data,\n            type: `${type}_FAILURE`\n          });\n        }\n      }\n\n      return next({ ...rest,\n        data,\n        type: `${type}_SUCCESS`\n      });\n    }\n\n    const {\n      promise,\n      type,\n      ...rest\n    } = action;\n    next({ ...rest,\n      type: `${type}_REQUEST`\n    });\n    return api.post(promise.url, promise.data).then(result => {\n      if (result.data.code === 1) next({ ...rest,\n        result,\n        type: `${type}_SUCCESS`\n      });else next({ ...rest,\n        result,\n        type: `${type}_FAILURE`\n      });\n    }).catch(error => {\n      next({ ...rest,\n        error,\n        type: `${type}_FAILURE`\n      });\n    });\n  };\n});","map":{"version":3,"sources":["/Users/eun/Projects/FirstPenguin/ttobak/front/src/Sessions/promiseMiddleware.js"],"names":["api","USER_AUTOLOGIN","next","action","promise","type","data","rest","u_id","post","url","then","result","code","catch","error"],"mappings":"AAAA,SAASA,GAAT,QAAoB,WAApB;AACA,SAASC,cAAT,QAA+B,UAA/B;AAEA,gBAAe,MAAM;AACnB,SAAOC,IAAI,IAAIC,MAAM,IAAI;AACvB,QAAG,CAACA,MAAM,CAACC,OAAX,EAAoB;AAClB,YAAM;AAACC,QAAAA,IAAD;AAAOC,QAAAA,IAAP;AAAa,WAAGC;AAAhB,UAAwBJ,MAA9B;;AACA,UAAGE,IAAI,KAAKJ,cAAZ,EAA4B;AAC1B,YAAGK,IAAI,CAACE,IAAR,EAAc;AACZ,iBAAON,IAAI,CAAC,EAAC,GAAGK,IAAJ;AAAUD,YAAAA,IAAV;AAAgBD,YAAAA,IAAI,EAAG,GAAEA,IAAK;AAA9B,WAAD,CAAX;AACD,SAFD,MAEO;AACL,iBAAOH,IAAI,CAAC,EAAC,GAAGK,IAAJ;AAAUD,YAAAA,IAAV;AAAgBD,YAAAA,IAAI,EAAG,GAAEA,IAAK;AAA9B,WAAD,CAAX;AACD;AACF;;AAED,aAAOH,IAAI,CAAC,EAAC,GAAGK,IAAJ;AAAUD,QAAAA,IAAV;AAAgBD,QAAAA,IAAI,EAAG,GAAEA,IAAK;AAA9B,OAAD,CAAX;AACD;;AAED,UAAM;AAAED,MAAAA,OAAF;AAAWC,MAAAA,IAAX;AAAiB,SAAGE;AAApB,QAA6BJ,MAAnC;AAEAD,IAAAA,IAAI,CAAC,EAAE,GAAGK,IAAL;AAAWF,MAAAA,IAAI,EAAG,GAAEA,IAAK;AAAzB,KAAD,CAAJ;AACA,WAAOL,GAAG,CAACS,IAAJ,CAASL,OAAO,CAACM,GAAjB,EAAsBN,OAAO,CAACE,IAA9B,EACJK,IADI,CACCC,MAAM,IAAI;AACd,UAAGA,MAAM,CAACN,IAAP,CAAYO,IAAZ,KAAqB,CAAxB,EAA2BX,IAAI,CAAC,EAAE,GAAGK,IAAL;AAAWK,QAAAA,MAAX;AAAmBP,QAAAA,IAAI,EAAG,GAAEA,IAAK;AAAjC,OAAD,CAAJ,CAA3B,KACKH,IAAI,CAAC,EAAE,GAAGK,IAAL;AAAWK,QAAAA,MAAX;AAAmBP,QAAAA,IAAI,EAAG,GAAEA,IAAK;AAAjC,OAAD,CAAJ;AACN,KAJI,EAKJS,KALI,CAKEC,KAAK,IAAI;AACdb,MAAAA,IAAI,CAAC,EAAE,GAAGK,IAAL;AAAWQ,QAAAA,KAAX;AAAkBV,QAAAA,IAAI,EAAG,GAAEA,IAAK;AAAhC,OAAD,CAAJ;AACD,KAPI,CAAP;AAQD,GAzBD;AA0BD,CA3BD","sourcesContent":["import { api } from '../api.js';\nimport { USER_AUTOLOGIN } from './action';\n\nexport default () => {\n  return next => action => {\n    if(!action.promise) {\n      const {type, data, ...rest} = action;\n      if(type === USER_AUTOLOGIN) {\n        if(data.u_id) {\n          return next({...rest, data, type: `${type}_SUCCESS`});\n        } else {\n          return next({...rest, data, type: `${type}_FAILURE`});\n        }\n      } \n\n      return next({...rest, data, type: `${type}_SUCCESS`});\n    }\n\n    const { promise, type, ...rest } = action;\n\n    next({ ...rest, type: `${type}_REQUEST` });\n    return api.post(promise.url, promise.data)\n      .then(result => {\n        if(result.data.code === 1) next({ ...rest, result, type: `${type}_SUCCESS` });\n        else next({ ...rest, result, type: `${type}_FAILURE` });\n      })\n      .catch(error => {\n        next({ ...rest, error, type: `${type}_FAILURE` });\n      });\n  };\n};"]},"metadata":{},"sourceType":"module"}