{"ast":null,"code":"var _jsxFileName = \"/Users/eun/Projects/FirstPenguin/first-penguin/front/src/Routes/Main/Main/MainContainer.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport MainPresenter from './MainPresenter';\nimport { Daily_Api, Result_Api } from 'api';\nimport Images, { MainRoot, Pause } from 'images';\nimport ContentsList from '../ContentsList';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { student_get, user_get } from 'Sessions/action.js';\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.goBack = () => {\n      this.props.history.goBack();\n    };\n\n    this.isFirstDiag = async () => {\n      const {\n        data\n      } = await Daily_Api.did(user.student.s_id);\n\n      if (data.is_first) {\n        this.setState({\n          isFirstDiagnose: true\n        });\n      }\n    };\n\n    this.request = async () => {\n      const {\n        user\n      } = this.props;\n\n      try {\n        const {\n          data\n        } = await Daily_Api.ask(user.student.s_id);\n        const save = await Daily_Api.save(user.student.s_id);\n        console.log(data);\n        console.log(save.data.current);\n\n        if (data.code === 1 || data.code === 'tutorial') {\n          if (save.data.current.length === 0) {\n            this.setState({\n              daily_complete: true\n            });\n          } else {\n            const content = ContentsList.filter(c => {\n              return c.name === save.data.current;\n            })[0];\n            this.setState({\n              data: data,\n              daily_custom: content,\n              daily_link: content.url\n            });\n          }\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.imagesPreloading = picture => {\n      for (let i = 0; i < ContentsList.length; i++) {\n        let img = new Image();\n        img.src = ContentsList[i].img;\n      }\n\n      for (let i in picture) {\n        for (let prop in picture[i]) {\n          if (typeof picture[i][prop] === 'object') {\n            let arr = picture[i][prop];\n\n            for (let i in arr) {\n              let img = new Image();\n              img.src = arr[i];\n              ++this.numOfLoadedImage;\n            }\n          } else {\n            let img = new Image();\n            img.src = picture[i][prop];\n            ++this.numOfLoadedImage;\n          }\n        }\n      }\n    };\n\n    this.isDiagOkay = async () => {\n      const {\n        user\n      } = this.props;\n      const {\n        data\n      } = await Daily_Api.okay(user.student.s_id);\n      console.log(data);\n      if (data.is_okay) this.props.history.push('/diagnose/sweep');else this.setState({\n        showPopUp: true\n      }); // this.props.history.push('/diagnose/attention');\n    };\n\n    this.onOkButtonHandle = () => {\n      this.setState({\n        showPopUp: false\n      });\n    };\n\n    this.developMode = () => {\n      this.setState({\n        develop: true\n      });\n    };\n\n    this.state = {\n      data: null,\n      isImageLoaded: false,\n      daily_custom: null,\n      daily_link: null,\n      daily_complete: false,\n      isFirstDiagnose: false,\n      showPopUp: false,\n      develop: false\n    };\n    this.numOfLoadedImage = 0;\n    this.pictures = {\n      Images,\n      MainRoot,\n      Pause\n    };\n    this.isFirstDiag();\n  }\n\n  componentDidMount() {\n    const {\n      user\n    } = this.props;\n    const {\n      dispatch\n    } = this.props;\n\n    if (!user.user.u_id || !user.student.s_id) {\n      this.props.history.push('/root/signin');\n      return;\n    }\n\n    dispatch(user_get(user.user.u_id));\n    dispatch(student_get(user.student.s_id, user.user.u_id));\n    this.request();\n    this.imagesPreloading(this.pictures);\n  }\n\n  render() {\n    const {\n      data,\n      isImageLoaded,\n      daily_custom,\n      daily_link,\n      daily_complete,\n      isFirstDiagnose,\n      showPopUp\n    } = this.state;\n    const {\n      user\n    } = this.props;\n\n    if (!user.student.s_id || !user.student.name) {\n      console.log('nnn', user);\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(MainPresenter, {\n      goBack: this.goBack,\n      student: user.student,\n      data: data,\n      isImageLoaded: isImageLoaded,\n      daily_custom: daily_custom,\n      daily_link: daily_link,\n      daily_complete: daily_complete,\n      isDiagOkay: this.isDiagOkay,\n      isFirstDiagnose: isFirstDiagnose,\n      onOkButtonHandle: this.onOkButtonHandle,\n      showPopUp: showPopUp,\n      developMode: this.developMode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    });\n  }\n\n}\n\nMain.propTypes = {\n  user: PropTypes.objectOf(PropTypes.any).isRequired,\n  dispatch: PropTypes.func.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user\n  };\n}\n\nexport default connect(mapStateToProps)(withRouter(Main));","map":{"version":3,"sources":["/Users/eun/Projects/FirstPenguin/first-penguin/front/src/Routes/Main/Main/MainContainer.js"],"names":["React","withRouter","MainPresenter","Daily_Api","Result_Api","Images","MainRoot","Pause","ContentsList","PropTypes","connect","student_get","user_get","Main","Component","constructor","props","goBack","history","isFirstDiag","data","did","user","student","s_id","is_first","setState","isFirstDiagnose","request","ask","save","console","log","current","code","length","daily_complete","content","filter","c","name","daily_custom","daily_link","url","e","imagesPreloading","picture","i","img","Image","src","prop","arr","numOfLoadedImage","isDiagOkay","okay","is_okay","push","showPopUp","onOkButtonHandle","developMode","develop","state","isImageLoaded","pictures","componentDidMount","dispatch","u_id","render","propTypes","objectOf","any","isRequired","func","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport MainPresenter from './MainPresenter';\n\nimport { Daily_Api, Result_Api } from 'api';\nimport Images, { MainRoot, Pause } from 'images';\nimport ContentsList from '../ContentsList';\n\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { student_get, user_get } from 'Sessions/action.js';\n\nclass Main extends React.Component {\n    static propTypes = {\n        user: PropTypes.objectOf(PropTypes.any).isRequired,\n        dispatch: PropTypes.func.isRequired,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: null,\n            isImageLoaded: false,\n            daily_custom: null,\n            daily_link: null,\n            daily_complete: false,\n            isFirstDiagnose: false,\n            showPopUp: false,\n            develop: false,\n        }\n        this.numOfLoadedImage = 0;\n        this.pictures = { Images, MainRoot, Pause };\n        this.isFirstDiag();\n    }\n\n    goBack = () => {\n        this.props.history.goBack();\n    }\n\n    componentDidMount() {\n        const { user } = this.props;\n        const { dispatch } = this.props;\n\n        if (!user.user.u_id || !user.student.s_id) {\n            this.props.history.push('/root/signin');\n            return;\n        }\n\n        dispatch(user_get(user.user.u_id));\n        dispatch(student_get(user.student.s_id, user.user.u_id));\n\n        this.request();\n        this.imagesPreloading(this.pictures);\n    }\n\n    isFirstDiag = async () => {\n        const { data } = await Daily_Api.did(user.student.s_id);\n        if (data.is_first) {\n            this.setState({\n                isFirstDiagnose: true,\n            });\n        }\n    }\n\n    request = async () => {\n        const { user } = this.props;\n        try {\n            const { data } = await Daily_Api.ask(user.student.s_id);\n            const save = await Daily_Api.save(user.student.s_id);\n            console.log(data);\n            console.log(save.data.current);\n\n            if (data.code === 1 || data.code === 'tutorial') {\n                if (save.data.current.length === 0) {\n                    this.setState({\n                        daily_complete: true,\n                    })\n                }\n                else {\n                    const content = ContentsList.filter(c => {\n                        return c.name === save.data.current;\n                    })[0];\n\n                    this.setState({\n                        data: data,\n                        daily_custom: content,\n                        daily_link: content.url,\n                    });\n                }\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    imagesPreloading = (picture) => {\n        for (let i = 0; i < ContentsList.length; i++) {\n            let img = new Image();\n            img.src = ContentsList[i].img;\n        }\n\n        for (let i in picture) {\n            for (let prop in picture[i]) {\n                if (typeof (picture[i][prop]) === 'object') {\n                    let arr = picture[i][prop];\n                    for (let i in arr) {\n                        let img = new Image();\n                        img.src = arr[i];\n                        ++this.numOfLoadedImage;\n                    }\n                } else {\n                    let img = new Image();\n                    img.src = picture[i][prop];\n                    ++this.numOfLoadedImage;\n                }\n            }\n        }\n    }\n\n    isDiagOkay = async () => {\n        const { user } = this.props;\n        const { data } = await Daily_Api.okay(user.student.s_id);\n\n        console.log(data);\n        if (data.is_okay) this.props.history.push('/diagnose/sweep');\n        else this.setState({\n            showPopUp: true,\n        });\n        // this.props.history.push('/diagnose/attention');\n    }\n\n    onOkButtonHandle = () => {\n        this.setState({\n            showPopUp: false,\n        });\n    }\n\n    developMode = () => {\n        this.setState({\n            develop: true,\n        })\n    }\n\n    render() {\n        const { data, isImageLoaded, daily_custom, daily_link, daily_complete, isFirstDiagnose, showPopUp } = this.state;\n        const { user } = this.props;\n\n        if (!user.student.s_id || !user.student.name) {\n            console.log('nnn', user);\n            return null;\n        }\n\n        return (\n            <MainPresenter\n                goBack={this.goBack}\n                student={user.student}\n                data={data}\n                isImageLoaded={isImageLoaded}\n                daily_custom={daily_custom}\n                daily_link={daily_link}\n                daily_complete={daily_complete}\n                isDiagOkay={this.isDiagOkay}\n                isFirstDiagnose={isFirstDiagnose}\n                onOkButtonHandle={this.onOkButtonHandle}\n                showPopUp={showPopUp}\n                developMode={this.developMode}\n            />\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return { user: state.user }\n}\n\nexport default connect(mapStateToProps)(withRouter(Main));"]},"metadata":{},"sourceType":"module"}