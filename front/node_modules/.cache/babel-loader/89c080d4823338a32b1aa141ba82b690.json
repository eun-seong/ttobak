{"ast":null,"code":"var _jsxFileName = \"/Users/eun/Projects/FirstPenguin/first-penguin/front/src/Routes/Main/Main/MainContainer.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport MainPresenter from './MainPresenter';\nimport { Daily_Api } from 'api';\nimport ContentsList from '../ContentsList';\nimport Images, { MainRoot, Pause } from 'images';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { student_get, user_get } from 'Sessions/action.js';\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.goBack = () => {\n      this.props.history.goBack();\n    };\n\n    this.request = async () => {\n      const {\n        user\n      } = this.props;\n\n      try {\n        const {\n          data\n        } = await Daily_Api.ask(user.student.s_id);\n        console.log(data);\n\n        if (data.code === 1) {\n          this.setState({\n            data: data,\n            daily_custom: data.daily_cure,\n            daily_link: ContentsList.filter(c => {\n              return c.name === data.daily_cure;\n            })[0].url\n          });\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.imagesPreloading = picture => {\n      for (let i = 0; i < ContentsList.length; i++) {\n        let img = new Image();\n        img.src = ContentsList[i].img;\n      }\n\n      for (let i in picture) {\n        for (let prop in picture[i]) {\n          if (typeof picture[i][prop] === 'object') {\n            let arr = picture[i][prop];\n\n            for (let i in arr) {\n              let img = new Image();\n              img.src = arr[i];\n              ++this.numOfLoadedImage;\n            }\n          } else {\n            let img = new Image();\n            img.src = picture[i][prop];\n            ++this.numOfLoadedImage;\n          }\n        }\n      }\n    };\n\n    this.state = {\n      data: null,\n      isImageLoaded: false,\n      daily_custom: null,\n      daily_link: null\n    };\n    this.numOfLoadedImage = 0;\n    this.pictures = {\n      Images,\n      MainRoot,\n      Pause\n    };\n    const {\n      user: _user\n    } = this.props;\n    const {\n      dispatch\n    } = this.props;\n\n    if (!('u_id' in _user.user)) {\n      this.props.history.push('/root/signin');\n      return;\n    }\n\n    if (!('s_id' in _user.student)) {\n      this.props.history.push('/root/selectstd');\n      return;\n    }\n\n    dispatch(user_get(_user.user.u_id));\n    dispatch(student_get(_user.student.s_id, _user.user.u_id));\n  }\n\n  async componentDidMount() {\n    const {\n      user\n    } = this.props;\n    if (!('s_id' in user.student)) return;\n    this.request();\n    this.imagesPreloading(this.pictures);\n  }\n\n  render() {\n    const {\n      data,\n      isImageLoaded,\n      daily_custom,\n      daily_link\n    } = this.state;\n    const {\n      user\n    } = this.props;\n\n    if (!('s_id' in user.student && 'name' in user.student)) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(MainPresenter, {\n      goBack: this.goBack,\n      student: user.student,\n      data: data,\n      isImageLoaded: isImageLoaded,\n      daily_custom: daily_custom,\n      daily_link: daily_link,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    });\n  }\n\n}\n\nMain.propTypes = {\n  user: PropTypes.objectOf(PropTypes.any).isRequired,\n  dispatch: PropTypes.func.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user\n  };\n}\n\nexport default connect(mapStateToProps)(withRouter(Main));","map":{"version":3,"sources":["/Users/eun/Projects/FirstPenguin/first-penguin/front/src/Routes/Main/Main/MainContainer.js"],"names":["React","withRouter","MainPresenter","Daily_Api","ContentsList","Images","MainRoot","Pause","PropTypes","connect","student_get","user_get","Main","Component","constructor","props","goBack","history","request","user","data","ask","student","s_id","console","log","code","setState","daily_custom","daily_cure","daily_link","filter","c","name","url","e","imagesPreloading","picture","i","length","img","Image","src","prop","arr","numOfLoadedImage","state","isImageLoaded","pictures","dispatch","push","u_id","componentDidMount","render","propTypes","objectOf","any","isRequired","func","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport MainPresenter from './MainPresenter';\n\nimport { Daily_Api } from 'api';\nimport ContentsList from '../ContentsList';\nimport Images, { MainRoot, Pause } from 'images';\n\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { student_get, user_get } from 'Sessions/action.js';\n\nclass Main extends React.Component {\n    static propTypes = {\n        user: PropTypes.objectOf(PropTypes.any).isRequired,\n        dispatch: PropTypes.func.isRequired,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: null,\n            isImageLoaded: false,\n            daily_custom: null,\n            daily_link: null,\n        }\n        this.numOfLoadedImage = 0;\n        this.pictures = { Images, MainRoot, Pause };\n\n        const { user } = this.props;\n        const { dispatch } = this.props;\n\n        if (!('u_id' in user.user)) {\n            this.props.history.push('/root/signin');\n            return;\n        }\n\n        if (!('s_id' in user.student)) {\n            this.props.history.push('/root/selectstd');\n            return;\n        }\n\n        dispatch(user_get(user.user.u_id));\n        dispatch(student_get(user.student.s_id, user.user.u_id));\n    }\n\n    goBack = () => {\n        this.props.history.goBack();\n    }\n\n    async componentDidMount() {\n        const { user } = this.props;\n        if (!('s_id' in user.student)) return;\n\n        this.request();\n        this.imagesPreloading(this.pictures);\n    }\n\n    request = async () => {\n        const { user } = this.props;\n        try {\n            const { data } = await Daily_Api.ask(user.student.s_id);\n            console.log(data);\n\n            if (data.code === 1) {\n                this.setState({\n                    data: data,\n                    daily_custom: data.daily_cure,\n                    daily_link: ContentsList.filter(c => {\n                        return c.name === data.daily_cure;\n                    })[0].url,\n                });\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    imagesPreloading = (picture) => {\n        for (let i = 0; i < ContentsList.length; i++) {\n            let img = new Image();\n            img.src = ContentsList[i].img;\n        }\n\n        for (let i in picture) {\n            for (let prop in picture[i]) {\n                if (typeof (picture[i][prop]) === 'object') {\n                    let arr = picture[i][prop];\n                    for (let i in arr) {\n                        let img = new Image();\n                        img.src = arr[i];\n                        ++this.numOfLoadedImage;\n                    }\n                } else {\n                    let img = new Image();\n                    img.src = picture[i][prop];\n                    ++this.numOfLoadedImage;\n                }\n            }\n        }\n    }\n\n    render() {\n        const { data, isImageLoaded, daily_custom, daily_link } = this.state;\n        const { user } = this.props;\n\n        if (!('s_id' in user.student && 'name' in user.student)) {\n            return null;\n        }\n        return (\n            <MainPresenter\n                goBack={this.goBack}\n                student={user.student}\n                data={data}\n                isImageLoaded={isImageLoaded}\n                daily_custom={daily_custom}\n                daily_link={daily_link}\n            />\n        );\n\n\n    }\n}\n\nfunction mapStateToProps(state) {\n    return { user: state.user }\n}\n\nexport default connect(mapStateToProps)(withRouter(Main));"]},"metadata":{},"sourceType":"module"}